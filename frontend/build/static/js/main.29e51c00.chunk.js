(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},257:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(25),s=n.n(r),o=(n(120),n(121),n(122),n(81)),i=n.n(o),j=n(113),l=n(114),u=n(26),b=n(79),d=n(46),O=n.n(d),h=n(31),f=n.n(h),x=n(112),p=n.n(x),m=n(47),g=n.n(m),S=n(39),y=n.n(S),v=n(260),w=n(261),C=n(110),F=n.n(C),_=n(4);function I(e){var t=e.dataArr,n=t.map((function(e){return e.datetime})),c=t.map((function(e){return e.concentration}));return Object(_.jsx)(F.a,{data:[{x:n,y:c},{type:"scatter"}],layout:{width:520,height:400,yaxis:{title:"Number Concentraion (#/cm3)"}}})}var N="ws://localhost:8765",T=new b.w3cwebsocket(N);function k(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(u.a)(r,2),o=s[0],i=(s[1],Object(c.useState)(!1)),d=Object(u.a)(i,2),h=d[0],x=(d[1],Object(c.useState)()),m=Object(u.a)(x,2),S=m[0],C=m[1],F=Object(c.useState)([]),k=Object(u.a)(F,2),D=k[0],P=k[1],A=Object(c.useState)(Date.now()),E=Object(u.a)(A,2),z=E[0],J=E[1];Object(c.useEffect)((function(){var e=n?"on":"off";fetch("localhost/api/command",{method:"POST",headers:{Accept:"application/json, text/plain","Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log("Post res:",e)})).catch(console.error)}),[n]);var L=function(e){var t=JSON.parse(e.data);console.log(t),C(t),J(Date.now())};T.onmessage=L,function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e})),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){if(Date.now()-z>2e3)(T=new b.w3cwebsocket(N)).onmessage=L;else{var e=new Date,t=Object(l.a)({},S);t.datetime=e;var n=Object(j.a)(D);for(n.push(t);Date.parse(e)-Date.parse(n[0].datetime)>=36e5;)n.shift();P(n)}}),2e3);return Object(_.jsxs)(O.a,{children:[Object(_.jsxs)(f.a,{span:8,offset:0,children:[Object(_.jsx)(p.a,{style:{margin:5},defaultChecked:!0,onChange:function(e){a(e)}}),n?h?Object(_.jsx)(g.a,{icon:Object(_.jsx)(v.a,{}),color:"error",children:"ERROR"}):o?Object(_.jsx)(g.a,{icon:Object(_.jsx)(w.a,{}),color:"warning",children:"WARNING"}):null:null,n&&S?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("h1",{style:{margin:10,padding:10,backgroundColor:"WhiteSmoke"},children:[Object(_.jsx)("p",{style:{fontSize:35,display:"inline"},children:S.concentration.toPrecision(3)}),Object(_.jsx)("span",{children:"\xa0"}),Object(_.jsxs)("p",{style:{fontSize:20,display:"inline"},children:["#/cm",Object(_.jsx)("sup",{children:"3"})]})]}),Object(_.jsxs)(O.a,{children:[Object(_.jsx)(f.a,{span:6,offset:2,children:Object(_.jsx)(y.a,{itemLayout:"horizontal",dataSource:["temp_sat","temp_con","temp_opt","flow"],renderItem:function(e){return Object(_.jsx)(y.a.Item,{children:e})}})}),Object(_.jsx)(f.a,{span:6,offset:2,children:Object(_.jsx)(y.a,{itemLayout:"horizontal",dataSource:[S.saturator_temperature.toFixed(2),S.condensor_temperature.toFixed(2),S.optics_temperature.toFixed(2),S.flow.toFixed(1)],renderItem:function(e){return Object(_.jsx)(y.a.Item,{children:e})}})}),Object(_.jsx)(f.a,{span:6,offset:2,children:Object(_.jsx)(y.a,{itemLayout:"horizontal",dataSource:[Object(_.jsxs)("text",{children:[Object(_.jsx)("sup",{children:"o"}),"C"]}),Object(_.jsxs)("text",{children:[Object(_.jsx)("sup",{children:"o"}),"C"]}),Object(_.jsxs)("text",{children:[Object(_.jsx)("sup",{children:"o"}),"C"]}),Object(_.jsx)("text",{children:"ml/min"})],renderItem:function(e){return Object(_.jsx)(y.a.Item,{children:e})}})})]})]}):null]}),Object(_.jsx)(f.a,{span:11,offset:0,children:n?Object(_.jsx)(I,{dataArr:D}):Object(_.jsx)("h2",{style:{color:"steelblue"},children:"mini_CPC by University of Helsinki"})})]})}var D=n(54),P=n.n(D),A=n(262),E=n(263);function z(e){var t=e.defaultName,n=e.defaultValue,a=e.delta,r=e.onChange,s=void 0===r?function(e){return e}:r,o=Object(c.useState)(t),i=Object(u.a)(o,2),j=i[0],l=(i[1],Object(c.useState)(n)),b=Object(u.a)(l,2),d=b[0],O=b[1];Object(c.useEffect)((function(){s(d)}),[d]);return Object(_.jsxs)("div",{style:{width:75,height:200},children:[Object(_.jsx)(g.a,{style:{width:75,height:40},children:j}),Object(_.jsx)(P.a,{style:{width:75,height:40},icon:Object(_.jsx)(A.a,{}),onClick:function(){if(a>=1){var e=parseInt(d)+parseInt(a);O(e)}else{var t=parseFloat(d)+parseFloat(a);O(parseFloat(t.toFixed(2)))}}}),Object(_.jsx)(g.a,{style:{width:75,height:40},children:d}),Object(_.jsx)(P.a,{style:{width:75,height:40},icon:Object(_.jsx)(E.a,{}),onClick:function(){if(a>=1){var e=parseInt(d)-parseInt(a);O(e)}else{var t=parseFloat(d)-parseFloat(a);O(parseFloat(t.toFixed(2)))}}})]})}function J(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(u.a)(r,2),o=s[0],i=s[1],j=Object(c.useState)(),l=Object(u.a)(j,2),b=l[0],d=l[1],h=Object(c.useState)(),x=Object(u.a)(h,2),p=x[0],m=x[1],g=Object(c.useState)(),S=Object(u.a)(g,2),y=S[0],v=S[1],w=Object(c.useState)(),C=Object(u.a)(w,2),F=C[0],I=C[1],N=Object(c.useState)(),T=Object(u.a)(N,2),k=T[0],D=T[1],A=Object(c.useState)(),E=Object(u.a)(A,2),J=E[0],L=E[1],R=function(e){a(e.saturator_temperature),i(e.condensor_temperature),d(e.optics_temperature),m(e.flow_coef)};Object(c.useEffect)((function(){fetch("localhost/api/settings").then((function(e){return e.json()})).then(R).catch(console.error)}),[]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(O.a,{children:[Object(_.jsx)(f.a,{children:Object(_.jsx)(z,{defaultName:"Sat_T",defaultValue:n||50,delta:1,onChange:function(e){v(e)}})}),Object(_.jsx)(f.a,{children:Object(_.jsx)(z,{defaultName:"Con_T",defaultValue:o||20,delta:1,onChange:function(e){I(e)}})}),Object(_.jsx)(f.a,{children:Object(_.jsx)(z,{defaultName:"Opt_T",defaultValue:b||50,delta:1,onChange:function(e){D(e)}})}),Object(_.jsx)(f.a,{children:Object(_.jsx)(z,{defaultName:"flow",defaultValue:p||.1,delta:.01,onChange:function(e){L(e)}})})]}),Object(_.jsx)(O.a,{children:Object(_.jsx)(P.a,{onClick:function(){var e={saturator_temperature:y,condensor_temperature:F,optics_temperature:k,flow_coef:J};fetch("localhost/api/set",{method:"POST",headers:{Accept:"application/json, text/plain","Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log("Post res:",e)})).catch(console.error)},children:"Confirm"})})]})}var L=i.a.TabPane;function R(){return Object(_.jsxs)(i.a,{type:"card",defaultActiveKey:"1",children:[Object(_.jsx)(L,{tab:"Dashboard",children:Object(_.jsx)(k,{})},"1"),Object(_.jsx)(L,{tab:"Setting",children:Object(_.jsx)(J,{})},"2"),Object(_.jsx)(L,{tab:"Data",children:"3"},"3")]})}var V=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(R,{})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(V,{})}),document.getElementById("root")),U()}},[[257,1,2]]]);
//# sourceMappingURL=main.29e51c00.chunk.js.map